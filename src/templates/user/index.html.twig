{% extends 'base.html.twig' %}

{% block title %}
  user_index
{% endblock %}

{% block body %}
  <div>
    {{ include('components/navbar.html.twig') }}
  </div>

  <div class="default-container">
    <form action="{{ path('search_user') }}">
      <input type="search" class="form-control form-control-dark" name="s" placeholder="Search" aria-label="Search" value="{{ app.request.query.get('s') | default('') }}">
    </form>

    {% if app.request.query.get('s')  %}
      <a href="{{ path('admin_user_index') }}"><h4>Return to index</h4></a></li>
      {% for user in search_user | default('') %}
      <p>{{ user.id }}</p>
      <p>{{ user.username }}</p>
      <p>{{ user.email }}</p>
      <p>{{ user.IsAdmin ?'Yes':'No'}}</p>
      {% if is_granted("USER_VIEW", user) %}
        <a href="/">More details</a>
      {% endif %}
      <br>
      <br>
      {% endfor %}
    {% endif %}

    {% if (search_user is not defined) %}
      <h3>{{ pagination.getTotalItemCount | default(0) }} Total Users</h3>
      {% for user in pagination | default('') %}
        <div>
          <p>{{ user.id }}</p>
          <p>{{ user.username }}</p>
          <p>{{ user.email }}</p>
          {% if is_granted("USER_VIEW", user) %}
            <a href="{{ path('app_user_show', { email: user.email }) }}">More details</a>
          {% endif %}
        </div>
      {% endfor %}
      {{ knp_pagination_render(pagination) }}
    {% endif %}
  </div>
{% endblock %}
